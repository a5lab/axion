function radar_visualization(n){var e=42;function l(){var t=1e4*Math.sin(e++);return t-Math.floor(t)}const o=[{radial_min:0,radial_max:.5,factor_x:1,factor_y:1},{radial_min:.5,radial_max:1,factor_x:-1,factor_y:1},{radial_min:-1,radial_max:-.5,factor_x:-1,factor_y:-1},{radial_min:-.5,radial_max:0,factor_x:1,factor_y:-1}],s=[{radius:130},{radius:220},{radius:310},{radius:400}],t=-675,r=-420,a=-675,i=420,d=[{x:450,y:90},{x:-675,y:90},{x:-675,y:-310},{x:450,y:-310}];function c(t){var e=t.x,t=t.y;return{t:Math.atan2(t,e),r:Math.sqrt(e*e+t*t)}}function f(t){return{x:t.r*Math.cos(t.t),y:t.r*Math.sin(t.t)}}function u(t,e,r){var n=Math.min(e,r),e=Math.max(e,r);return Math.min(Math.max(t,n),e)}function y(t,e,r){return{t:t.t,r:u(t.r,e,r)}}function p(t,e,r){return{x:u(t.x,e.x,r.x),y:u(t.y,e.y,r.y)}}function m(t,e){var r={t:o[t].radial_min*Math.PI,r:0===e?30:s[e-1].radius},n={t:o[t].radial_max*Math.PI,r:s[e].radius},a={x:15*o[t].factor_x,y:15*o[t].factor_y},i={x:s[3].radius*o[t].factor_x,y:s[3].radius*o[t].factor_y};return{clipx:function(t){var e=y(c(p(t,a,i)),r.r+15,n.r-15);return t.x=f(e).x,t.x},clipy:function(t){var e=y(c(p(t,a,i)),r.r+15,n.r-15);return t.y=f(e).y,t.y},random:function(){return f({t:(e=n.t,(t=r.t)+l()*(e-t)),r:(e=n.r,(t=r.r)+.5*(l()+l())*(e-t))});var t,e}}}for(var x=0;x<n.entries.length;x++){(_=n.entries[x]).segment=m(_.quadrant,_.ring);var h=_.segment.random();_.x=h.x,_.y=h.y,_.color=_.active||n.print_layout?n.rings[_.ring].color:n.colors.inactive}for(var g=new Array(4),v=0;v<4;v++){g[v]=new Array(4);for(var b=0;b<4;b++)g[v][b]=[]}for(x=0;x<n.entries.length;x++){var _=n.entries[x];g[_.quadrant][_.ring].push(_)}var M=1;for(v of[2,3,1,0])for(b=0;b<4;b++){var A=g[v][b];A.sort(function(t,e){return t.label.localeCompare(e.label)});for(x=0;x<A.length;x++)A[x].id=""+M++}function w(t,e){return"translate("+t+","+e+")"}var H=d3.select("svg#"+n.svg_id).style("background-color",n.colors.background).attr("width",n.width).attr("height",n.height),k=H.append("g"),z=("zoomed_quadrant"in n?H.attr("viewBox",(H=n.zoomed_quadrant,[Math.max(0,400*o[H].factor_x)-420,Math.max(0,400*o[H].factor_y)-420,440,440].join(" "))):k.attr("transform",w(n.width/2,n.height/2)),k.append("g"));z.append("line").attr("x1",0).attr("y1",-400).attr("x2",0).attr("y2",400).style("stroke",n.colors.grid).style("stroke-width",1),z.append("line").attr("x1",-400).attr("y1",0).attr("x2",400).attr("y2",0).style("stroke",n.colors.grid).style("stroke-width",1);H=z.append("defs").append("filter").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("id","solid");H.append("feFlood").attr("flood-color","rgb(0, 0, 0, 0.8)"),H.append("feComposite").attr("in","SourceGraphic");for(x=0;x<s.length;x++)z.append("circle").attr("cx",0).attr("cy",0).attr("r",s[x].radius).style("fill","none").style("stroke",n.colors.grid).style("stroke-width",1),n.print_layout&&z.append("text").text(n.rings[x].name).attr("y",62-s[x].radius).attr("text-anchor","middle").style("fill","#e5e5e5").style("font-family","Arial, Helvetica").style("font-size","42px").style("font-weight","bold").style("pointer-events","none").style("user-select","none");function L(t,e,r=null){var n=e<2?0:120,r=null==r?-16:12*r;return e%2==1&&(r=r+36+12*g[t][e-1].length),w(d[t].x+n,d[t].y+r)}if(n.print_layout){k.append("text").attr("transform",w(t,r)).text(n.title).style("font-family","Arial, Helvetica").style("font-size","34px"),k.append("text").attr("transform",w(a,i)).text("▲ moved up     ▼ moved down").attr("xml:space","preserve").style("font-family","Arial, Helvetica").style("font-size","10px");for(var T=k.append("g"),v=0;v<4;v++){T.append("text").attr("transform",w(d[v].x,d[v].y-45)).text(n.quadrants[v].name).style("font-family","Arial, Helvetica").style("font-size","18px");for(b=0;b<4;b++)T.append("text").attr("transform",L(v,b)).text(n.rings[b].name).style("font-family","Arial, Helvetica").style("font-size","12px").style("font-weight","bold"),T.selectAll(".legend"+v+b).data(g[v][b]).enter().append("a").attr("href",function(t,e){return t.link||"#"}).append("text").attr("transform",function(t,e){return L(v,b,e)}).attr("class","legend"+v+b).attr("id",function(t,e){return"legendItem"+t.id}).text(function(t,e){return t.id+". "+t.label}).style("font-family","Arial, Helvetica").style("font-size","11px").on("mouseover",function(t,e){q(e),B(e)}).on("mouseout",function(t,e){I(),C(e)})}}H=k.append("g").attr("id","rink"),k=k.append("g").attr("id","bubble").attr("x",0).attr("y",0).style("opacity",0).style("pointer-events","none").style("user-select","none");function q(t){var e;(t.active||n.print_layout)&&(e=d3.select("#bubble text").text(t.label).node().getBBox(),d3.select("#bubble").attr("transform",w(t.x-e.width/2,t.y-16)).style("opacity",.8),d3.select("#bubble rect").attr("x",-5).attr("y",-e.height).attr("width",e.width+10).attr("height",e.height+4),d3.select("#bubble path").attr("transform",w(e.width/2-5,3)))}function I(){d3.select("#bubble").attr("transform",w(0,0)).style("opacity",0)}function B(t){t=document.getElementById("legendItem"+t.id);t.setAttribute("filter","url(#solid)"),t.setAttribute("fill","white")}function C(t){t=document.getElementById("legendItem"+t.id);t.removeAttribute("filter"),t.removeAttribute("fill")}k.append("rect").attr("rx",4).attr("ry",4).style("fill","#333"),k.append("text").style("font-family","sans-serif").style("font-size","10px").style("fill","#fff"),k.append("path").attr("d","M 0,0 10,0 5,8 z").style("fill","#333");var N=H.selectAll(".blip").data(n.entries).enter().append("g").attr("class","blip").attr("transform",function(t,e){return L(t.quadrant,t.ring,e)}).on("mouseover",function(t,e){q(e),B(e)}).on("mouseout",function(t,e){I(),C(e)});N.each(function(t){var e,r=d3.select(this);!n.print_layout&&t.active&&t.hasOwnProperty("link")&&(r=r.append("a").attr("xlink:href",t.link)),0<t.moved?r.append("path").attr("d","M -11,5 11,5 0,-13 z").style("fill",t.color):t.moved<0?r.append("path").attr("d","M -11,-5 11,-5 0,13 z").style("fill",t.color):r.append("circle").attr("r",9).attr("fill",t.color),(t.active||n.print_layout)&&(e=n.print_layout?t.id:t.label.match(/[a-z]/i),r.append("text").text(e).attr("y",3).attr("text-anchor","middle").style("fill","#fff").style("font-family","Arial, Helvetica").style("font-size",function(t){return 2<e.length?"8px":"9px"}).style("pointer-events","none").style("user-select","none"))}),d3.forceSimulation().nodes(n.entries).velocityDecay(.19).force("collision",d3.forceCollide().radius(12).strength(.85)).on("tick",function(){N.attr("transform",function(t){return w(t.segment.clipx(t),t.segment.clipy(t))})})}document.addEventListener("DOMContentLoaded",()=>{var t,e={svg_id:"radar",width:1450,height:1e3,colors:{background:"#fff",grid:"#bbb",inactive:"#ddd"}};d3.selectAll("svg#radar")._groups[0].length&&(0==d3.selectAll("h1#name")._groups[0].length||0==d3.selectAll("table#segments tbody tr")._groups[0].length||0==d3.selectAll("table#rings tbody tr")._groups[0].length||0==d3.selectAll("table#blips tbody tr")._groups[0].length?console.log("Invalid DOM model in order to build radar."):(e.title=d3.selectAll("h1#name").text(),e.print_layout=!0,t=d3.selectAll("table#segments tbody tr"),t=Array.from(t._groups[0]).map(function(t,e){t=Array.from(t.children);return{name:t[0].innerHTML,description:t[1].innerHTML}}),e.quadrants=t,t=d3.selectAll("table#rings tbody tr"),t=Array.from(t._groups[0]).map(function(t,e){t=Array.from(t.children);return{name:t[0].innerHTML,description:t[1].innerHTML,priority:Number(t[2].innerHTML),color:t[3].innerHTML}}),e.rings=t,t=d3.selectAll("table#blips tbody tr"),t=Array.from(t._groups[0]).map(function(t,e){var t=Array.from(t.children),r={label:t[0].innerHTML,quadrant:Number(t[2].innerHTML),ring:Number(t[3].innerHTML),moved:Number(t[4].innerHTML),active:"true"===t[5].innerHTML};return t[1].innerHTML?{...r,link:t[1].innerHTML}:r}),e.entries=t,radar_visualization(e)))});